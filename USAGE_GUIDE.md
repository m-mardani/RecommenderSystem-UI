# راهنمای استفاده سریع - سیستم توصیه‌گر

این راهنما شما را در مراحل راه‌اندازی و استفاده از سیستم توصیه‌گر همراهی می‌کند.

## نصب و راه‌اندازی

### ۱. پیش‌نیازها

قبل از شروع، مطمئن شوید که موارد زیر نصب شده‌اند:

- **Node.js** نسخه ۱۸ یا بالاتر ([دانلود](https://nodejs.org/))
- **npm** (به همراه Node.js نصب می‌شود)
- **سرور FastAPI** در حال اجرا

### ۲. نصب وابستگی‌ها

```bash
cd frontend
npm install
```

### ۳. تنظیم متغیرهای محیطی

فایل `.env.local` را ایجاد کنید:

```bash
cp .env.example .env.local
```

سپس فایل را باز کرده و آدرس API بک‌اند خود را وارد کنید:

```env
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1
```

### ۴. اجرای برنامه

```bash
npm run dev
```

برنامه در آدرس [http://localhost:3000](http://localhost:3000) در دسترس خواهد بود.

## جریان کار استفاده

### گام ۱: ثبت‌نام و ورود

1. به صفحه [http://localhost:3000](http://localhost:3000) بروید
2. روی "اینجا ثبت‌نام کنید" کلیک کنید
3. فرم ثبت‌نام را با اطلاعات خود پر کنید
4. پس از ثبت‌نام موفق، به صورت خودکار وارد سیستم می‌شوید

### گام ۲: بارگذاری مجموعه داده

1. از منوی بالا، روی "مجموعه داده‌ها" کلیک کنید
2. روی دکمه "بارگذاری مجموعه داده جدید" کلیک کنید
3. اطلاعات مجموعه داده را وارد کنید:
   - نام مجموعه داده
   - توضیحات
   - فایل CSV یا JSON
4. روی "ارسال" کلیک کنید

### گام ۳: آموزش مدل

1. از منوی بالا، روی "آموزش مدل" کلیک کنید
2. مجموعه داده مورد نظر را انتخاب کنید
3. نوع مدل مورد نظر را انتخاب کنید:
   - فیلتر مشارکتی
   - مبتنی بر محتوا
   - ترکیبی
   - فاکتورسازی ماتریس
   - یادگیری عمیق
4. روی "شروع آموزش جدید" کلیک کنید

### گام ۴: پایش پیشرفت آموزش

1. از منوی بالا، روی "پایش کارها" کلیک کنید
2. لیست کارهای آموزشی را مشاهده کنید
3. وضعیت و پیشرفت هر کار را ببینید
4. صفحه به صورت خودکار هر ۵ ثانیه بروزرسانی می‌شود

### گام ۵: مشاهده مدل‌های آموزش داده شده

1. از منوی بالا، روی "مدل‌ها" کلیک کنید
2. لیست مدل‌های آموزش داده شده را مشاهده کنید
3. معیارهای عملکرد هر مدل را ببینید
4. می‌توانید:
   - از مدل برای دریافت توصیه استفاده کنید
   - مدل را حذف کنید

### گام ۶: دریافت توصیه‌ها

1. از منوی بالا، روی "توصیه‌ها" کلیک کنید
2. اطلاعات زیر را وارد کنید:
   - شناسه کاربر
   - انتخاب مدل
   - تعداد توصیه‌ها
3. روی "دریافت توصیه‌ها" کلیک کنید
4. نتایج را در جدول سمت راست مشاهده کنید

## ویژگی‌های امنیتی

### تازه‌سازی خودکار توکن

سیستم به صورت خودکار:
- توکن‌های منقضی شده را تشخیص می‌دهد
- توکن جدید درخواست می‌کند
- کاربر را در صورت نیاز به صفحه ورود هدایت می‌کند

### کنترل دسترسی

- همه صفحات به جز ورود و ثبت‌نام محافظت شده‌اند
- کاربران غیرمجاز به صورت خودکار به صفحه ورود منتقل می‌شوند
- دسترسی‌ها بر اساس نقش کاربر (ADMIN/USER) کنترل می‌شوند

## مدیریت خطاها

سیستم خطاهای رایج را به صورت زیر مدیریت می‌کند:

### خطای شبکه

اگر سرور در دسترس نباشد:
- پیام خطای مناسب نمایش داده می‌شود
- دکمه "تلاش مجدد" فراهم می‌شود

### خطای احراز هویت

اگر توکن منقضی شود:
- به صورت خودکار تلاش برای تازه‌سازی می‌شود
- در صورت عدم موفقیت، به صفحه ورود منتقل می‌شوید

### خطای اعتبارسنجی

- پیام‌های خطای واضح برای فیلدهای نامعتبر
- راهنمایی برای اصلاح اطلاعات

## نکات مفید

### ۱. مدیریت چند مجموعه داده

می‌توانید چندین مجموعه داده بارگذاری کنید و برای هر کدام مدل‌های مختلف آموزش دهید.

### ۲. مقایسه مدل‌ها

با آموزش مدل‌های مختلف روی یک مجموعه داده، می‌توانید عملکرد آن‌ها را مقایسه کنید.

### ۳. پایش همزمان

می‌توانید چندین کار آموزشی را همزمان اجرا کرده و پیشرفت آن‌ها را پایش کنید.

### ۴. بروزرسانی خودکار

صفحه پایش کارها به صورت خودکار هر ۵ ثانیه بروزرسانی می‌شود.

## مشکلات رایج و راه‌حل‌ها

### ۱. خطای CORS

**مشکل:** خطای CORS در Console مرورگر

**راه‌حل:** مطمئن شوید بک‌اند FastAPI به درستی تنظیم شده است:

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### ۲. خطای "Network Error"

**مشکل:** نمی‌توان به سرور متصل شد

**راه‌حل:**
- مطمئن شوید سرور FastAPI در حال اجرا است
- آدرس API در `.env.local` صحیح است
- فایروال یا antivirus اتصال را مسدود نکرده است

### ۳. صفحه سفید پس از ورود

**مشکل:** پس از ورود موفق، صفحه سفید نمایش داده می‌شود

**راه‌حل:**
- Console مرورگر را بررسی کنید
- localStorage را پاک کنید
- Cache مرورگر را پاک کنید
- مرورگر را refresh کنید

### ۴. توکن منقضی نمی‌شود

**مشکل:** پس از مدتی باید دوباره وارد شوم

**راه‌حل:** این رفتار طبیعی است. سیستم به صورت خودکار توکن را تازه می‌کند، اما اگر refresh token هم منقضی شود، باید دوباره وارد شوید.

## دستورات مفید

### توسعه

```bash
npm run dev          # اجرای سرور توسعه
npm run build        # ساخت برای تولید
npm start            # اجرای سرور تولید
npm run lint         # بررسی کد
```

### پاک‌سازی

```bash
rm -rf .next         # پاک کردن فایل‌های ساخت
rm -rf node_modules  # پاک کردن وابستگی‌ها
npm install          # نصب مجدد وابستگی‌ها
```

## پشتیبانی

برای گزارش مشکلات یا پیشنهادات، لطفاً یک Issue در GitHub ایجاد کنید.

## نسخه

نسخه فعلی: 0.1.0

آخرین بروزرسانی: ۱۴۰۴
